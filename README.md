# ğŸš€ ã‚¤ãƒ™ãƒ³ãƒˆé§†å‹•å‹ECãƒã‚¤ã‚¯ãƒ­ã‚µãƒ¼ãƒ“ã‚¹

[![Go](https://img.shields.io/badge/Go-1.21+-00ADD8?style=flat&logo=go)](https://golang.org/)
[![Next.js](https://img.shields.io/badge/Next.js-14.0-000000?style=flat&logo=next.js)](https://nextjs.org/)
[![Kafka](https://img.shields.io/badge/Apache%20Kafka-7.4.0-231F20?style=flat&logo=apache-kafka)](https://kafka.apache.org/)
[![Docker](https://img.shields.io/badge/Docker-Compose-2496ED?style=flat&logo=docker)](https://docker.com/)
[![Kubernetes](https://img.shields.io/badge/Kubernetes-Ready-326CE5?style=flat&logo=kubernetes)](https://kubernetes.io/)

**ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ WebSocketæ›´æ–°æ©Ÿèƒ½ã‚’å‚™ãˆãŸã€ãƒ¢ãƒ€ãƒ³ãªã‚¤ãƒ™ãƒ³ãƒˆé§†å‹•å‹ãƒã‚¤ã‚¯ãƒ­ã‚µãƒ¼ãƒ“ã‚¹ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã«ã‚ˆã‚‹Eã‚³ãƒãƒ¼ã‚¹æ³¨æ–‡å‡¦ç†ã‚·ã‚¹ãƒ†ãƒ **

## ğŸ¯ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦

ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯ã€é«˜ã‚¹ã‚±ãƒ¼ãƒ«ãªEã‚³ãƒãƒ¼ã‚¹æ³¨æ–‡å‡¦ç†ã®ãŸã‚ã®**å®Œå…¨ãªã‚¤ãƒ™ãƒ³ãƒˆé§†å‹•å‹ãƒã‚¤ã‚¯ãƒ­ã‚µãƒ¼ãƒ“ã‚¹ã‚·ã‚¹ãƒ†ãƒ **ã‚’å®Ÿè¨¼ã—ã¾ã™ã€‚ã‚¤ãƒ™ãƒ³ãƒˆã‚½ãƒ¼ã‚·ãƒ³ã‚°ã€CQRSã€WebSocketã«ã‚ˆã‚‹ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ é€šä¿¡ãªã©ã®ãƒ¢ãƒ€ãƒ³ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’æ¡ç”¨ã—ã¦ã„ã¾ã™ã€‚

### âœ¨ ä¸»è¦æ©Ÿèƒ½

- ğŸ”„ **ã‚¤ãƒ™ãƒ³ãƒˆé§†å‹•ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£** - å…¨ã‚µãƒ¼ãƒ“ã‚¹ãŒKafkaã‚¤ãƒ™ãƒ³ãƒˆã§é€šä¿¡
- âš¡ **ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ›´æ–°** - WebSocketã«ã‚ˆã‚‹ãƒ©ã‚¤ãƒ–æ³¨æ–‡è¿½è·¡
- ğŸ—ï¸ **ãƒã‚¤ã‚¯ãƒ­ã‚µãƒ¼ãƒ“ã‚¹** - ç‹¬ç«‹ã—ãŸç–çµåˆã‚µãƒ¼ãƒ“ã‚¹
- ğŸ“± **ãƒ¢ãƒ€ãƒ³UI** - React/Next.js + Tailwind CSS + TypeScript
- ğŸ³ **ã‚³ãƒ³ãƒ†ãƒŠãƒã‚¤ãƒ†ã‚£ãƒ–** - Docker & Kuberneteså®Œå…¨å¯¾å¿œ
- â˜ï¸ **ã‚¯ãƒ©ã‚¦ãƒ‰å¯¾å¿œ** - AWS EKSãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆå¯¾å¿œ
- ğŸ” **å¯è¦³æ¸¬æ€§** - ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯ã¨ãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°å¯¾å¿œ
- ğŸ§ª **ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸** - åŒ…æ‹¬çš„ãƒ†ã‚¹ãƒˆæˆ¦ç•¥

## ğŸ›ï¸ ã‚·ã‚¹ãƒ†ãƒ æ§‹æˆ

```mermaid
graph TB
    subgraph "ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰å±¤"
        UI[Next.js ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰<br/>TypeScript + Tailwind]
    end
    
    subgraph "ãƒã‚¤ã‚¯ãƒ­ã‚µãƒ¼ãƒ“ã‚¹å±¤"
        OS[æ³¨æ–‡ã‚µãƒ¼ãƒ“ã‚¹<br/>:8080]
        IS[åœ¨åº«ã‚µãƒ¼ãƒ“ã‚¹<br/>:8081] 
        PS[æ±ºæ¸ˆã‚µãƒ¼ãƒ“ã‚¹<br/>:8082]
        NS[é€šçŸ¥ã‚µãƒ¼ãƒ“ã‚¹<br/>:8083]
        SS[é…é€ã‚µãƒ¼ãƒ“ã‚¹<br/>:8084]
        STS[ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚µãƒ¼ãƒ“ã‚¹<br/>:8085]
    end
    
    subgraph "ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ–ãƒ­ãƒ¼ã‚«ãƒ¼"
        KAFKA[Apache Kafka<br/>ã‚¤ãƒ™ãƒ³ãƒˆã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°]
    end
    
    UI -->|REST/WebSocket| OS
    UI -->|WebSocket| STS
    
    OS -->|æ³¨æ–‡ä½œæˆã‚¤ãƒ™ãƒ³ãƒˆ| KAFKA
    IS -->|åœ¨åº«ç¢ºèªã‚¤ãƒ™ãƒ³ãƒˆ| KAFKA
    PS -->|æ±ºæ¸ˆå®Œäº†ã‚¤ãƒ™ãƒ³ãƒˆ| KAFKA
    NS -->|é€šçŸ¥é€ä¿¡ã‚¤ãƒ™ãƒ³ãƒˆ| KAFKA
    SS -->|é…é€å®Œäº†ã‚¤ãƒ™ãƒ³ãƒˆ| KAFKA
    
    KAFKA -->|ã‚¤ãƒ™ãƒ³ãƒˆ| IS
    KAFKA -->|ã‚¤ãƒ™ãƒ³ãƒˆ| PS
    KAFKA -->|ã‚¤ãƒ™ãƒ³ãƒˆ| NS
    KAFKA -->|ã‚¤ãƒ™ãƒ³ãƒˆ| SS
    KAFKA -->|å…¨ã‚¤ãƒ™ãƒ³ãƒˆ| STS
    
    STS -->|ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ›´æ–°| UI
```

## ğŸš¦ ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆ

### å‰ææ¡ä»¶

- Docker & Docker Compose
- ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™ºç”¨ Go 1.21+
- ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰é–‹ç™ºç”¨ Node.js 18+

### ğŸ¬ ãƒ¯ãƒ³ã‚³ãƒãƒ³ãƒ‰ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

```bash
# ãƒªãƒã‚¸ãƒˆãƒªã®ã‚¯ãƒ­ãƒ¼ãƒ³ã¨ã‚·ã‚¹ãƒ†ãƒ å…¨ä½“ã®èµ·å‹•
git clone <repository-url>
cd kubernetes-event-driven-service

# å…¨ã‚µãƒ¼ãƒ“ã‚¹èµ·å‹•ï¼ˆãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ + ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ï¼‰
make run-local

# ãƒ–ãƒ©ã‚¦ã‚¶ã§ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã‚’é–‹ã
make open-frontend
```

ã“ã‚Œã§å®Œäº†ï¼ã‚·ã‚¹ãƒ†ãƒ ã¯ä»¥ä¸‹ã®URLã§åˆ©ç”¨å¯èƒ½ã«ãªã‚Šã¾ã™ï¼š
- **ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰**: http://localhost:3000
- **æ³¨æ–‡API**: http://localhost:8080
- **ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹API**: http://localhost:8085

### ğŸ§ª ã‚·ã‚¹ãƒ†ãƒ ã®ãƒ†ã‚¹ãƒˆ

```bash
# ãƒ†ã‚¹ãƒˆæ³¨æ–‡ã®ä½œæˆ
make test-order

# åœ¨åº«ãƒ¬ãƒ™ãƒ«ã®ç¢ºèª
make test-inventory

# æ³¨æ–‡ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã®ç¢ºèª
make test-status
```

## ğŸ› ï¸ é–‹ç™ºç’°å¢ƒã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

### ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™º

```bash
# ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã‚µãƒ¼ãƒ“ã‚¹ã®ã¿èµ·å‹•
docker-compose up -d zookeeper kafka order-service inventory-service payment-service notification-service shipping-service status-service

# ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã‚’é–‹ç™ºãƒ¢ãƒ¼ãƒ‰ã§èµ·å‹•
cd frontend
npm install
npm run dev
```

### åˆ©ç”¨å¯èƒ½ã‚µãƒ¼ãƒ“ã‚¹

| ã‚µãƒ¼ãƒ“ã‚¹ | ãƒãƒ¼ãƒˆ | ç”¨é€” | ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯ |
|---------|------|------|--------------|
| **ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰** | 3000 | React/Next.js UI | <http://localhost:3000> |
| **æ³¨æ–‡ã‚µãƒ¼ãƒ“ã‚¹** | 8080 | æ³¨æ–‡ä½œæˆ | <http://localhost:8080/health> |
| **åœ¨åº«ã‚µãƒ¼ãƒ“ã‚¹** | 8081 | åœ¨åº«ç®¡ç† | <http://localhost:8081/health> |
| **æ±ºæ¸ˆã‚µãƒ¼ãƒ“ã‚¹** | 8082 | æ±ºæ¸ˆå‡¦ç† | <http://localhost:8082/health> |
| **é€šçŸ¥ã‚µãƒ¼ãƒ“ã‚¹** | 8083 | é¡§å®¢é€šçŸ¥ | <http://localhost:8083/health> |
| **é…é€ã‚µãƒ¼ãƒ“ã‚¹** | 8084 | é…é€ãƒ»è¿½è·¡ | <http://localhost:8084/health> |
| **ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚µãƒ¼ãƒ“ã‚¹** | 8085 | æ³¨æ–‡è¿½è·¡ + WebSocket | <http://localhost:8085/health> |
| **Kafka** | 9092 | ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ–ãƒ­ãƒ¼ã‚«ãƒ¼ | - |
| **Zookeeper** | 2181 | Kafkaèª¿æ•´ | - |

## ğŸ“Š ã‚¤ãƒ™ãƒ³ãƒˆãƒ•ãƒ­ãƒ¼

ã‚·ã‚¹ãƒ†ãƒ ã¯ã‚¤ãƒ™ãƒ³ãƒˆé§†å‹•ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã§æ³¨æ–‡ã‚’å‡¦ç†ã—ã¾ã™ï¼š

```mermaid
sequenceDiagram
    participant User as ãƒ¦ãƒ¼ã‚¶ãƒ¼
    participant Frontend as ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰
    participant OrderService as æ³¨æ–‡ã‚µãƒ¼ãƒ“ã‚¹
    participant InventoryService as åœ¨åº«ã‚µãƒ¼ãƒ“ã‚¹
    participant PaymentService as æ±ºæ¸ˆã‚µãƒ¼ãƒ“ã‚¹
    participant NotificationService as é€šçŸ¥ã‚µãƒ¼ãƒ“ã‚¹
    participant ShippingService as é…é€ã‚µãƒ¼ãƒ“ã‚¹
    participant StatusService as ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚µãƒ¼ãƒ“ã‚¹
    participant Kafka as Kafka
    
    User->>Frontend: æ³¨æ–‡ä½œæˆ
    Frontend->>OrderService: POST /order
    OrderService->>Kafka: æ³¨æ–‡ä½œæˆã‚¤ãƒ™ãƒ³ãƒˆ
    OrderService-->>Frontend: æ³¨æ–‡ID
    
    Kafka->>InventoryService: æ³¨æ–‡ä½œæˆã‚¤ãƒ™ãƒ³ãƒˆ
    InventoryService->>Kafka: åœ¨åº«ç¢ºèªã‚¤ãƒ™ãƒ³ãƒˆ
    
    Kafka->>PaymentService: åœ¨åº«ç¢ºèªã‚¤ãƒ™ãƒ³ãƒˆ
    PaymentService->>Kafka: æ±ºæ¸ˆå®Œäº†ã‚¤ãƒ™ãƒ³ãƒˆ
    
    par ä¸¦åˆ—å‡¦ç†
        Kafka->>NotificationService: æ±ºæ¸ˆå®Œäº†ã‚¤ãƒ™ãƒ³ãƒˆ
        NotificationService->>Kafka: é€šçŸ¥é€ä¿¡ã‚¤ãƒ™ãƒ³ãƒˆ
    and
        Kafka->>ShippingService: æ±ºæ¸ˆå®Œäº†ã‚¤ãƒ™ãƒ³ãƒˆ
        ShippingService->>Kafka: é…é€å®Œäº†ã‚¤ãƒ™ãƒ³ãƒˆ
    end
    
    Kafka->>StatusService: å…¨ã‚¤ãƒ™ãƒ³ãƒˆ
    StatusService-->>Frontend: WebSocketæ›´æ–°
    Frontend-->>User: ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹
```

## ğŸ® ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ãƒ‡ãƒ¢

### 1. **ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰è¡¨ç¤º**

- ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ³¨æ–‡çµ±è¨ˆ
- åœ¨åº«ãƒ¬ãƒ™ãƒ«ç›£è¦–
- å…¨æ³¨æ–‡ã®ç¾åœ¨ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹è¡¨ç¤º

### 2. **æ³¨æ–‡ä½œæˆ**

- å•†å“é¸æŠï¼ˆãƒ—ãƒ¬ãƒŸã‚¢ãƒ ã‚¦ã‚£ã‚¸ã‚§ãƒƒãƒˆã€ãƒ‡ãƒ©ãƒƒã‚¯ã‚¹ã‚¬ã‚¸ã‚§ãƒƒãƒˆã€ã‚¨ãƒªãƒ¼ãƒˆãƒ‡ãƒã‚¤ã‚¹ï¼‰
- æ•°é‡é¸æŠï¼ˆåœ¨åº«æ¤œè¨¼ä»˜ãï¼‰
- ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ä¾¡æ ¼è¨ˆç®—

### 3. **ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ è¿½è·¡**

- æ³¨æ–‡ã®é€²è¡ŒçŠ¶æ³ã‚’ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ç›£è¦–
- ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ä»˜ãã‚¤ãƒ™ãƒ³ãƒˆã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³
- é…é€è¿½è·¡ç•ªå·å–å¾—
- WebSocketæ¥ç¶šçŠ¶æ…‹ã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿ãƒ¼

### 4. **ã‚¤ãƒ™ãƒ³ãƒˆã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³**

å„æ³¨æ–‡ã®å®Œå…¨ãªã‚¤ãƒ™ãƒ³ãƒˆå±¥æ­´ã‚’è¡¨ç¤ºï¼š

- âœ… **æ³¨æ–‡ä½œæˆ** â†’ âœ… **åœ¨åº«ç¢ºèª** â†’ âœ… **æ±ºæ¸ˆå®Œäº†** â†’ âœ… **é€šçŸ¥é€ä¿¡** â†’ âœ… **é…é€å®Œäº†**

## ğŸ—ï¸ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã®ãƒã‚¤ãƒ©ã‚¤ãƒˆ

### ãƒã‚¤ã‚¯ãƒ­ã‚µãƒ¼ãƒ“ã‚¹ãƒ‘ã‚¿ãƒ¼ãƒ³

- **å˜ä¸€è²¬ä»»åŸå‰‡**: å„ã‚µãƒ¼ãƒ“ã‚¹ã¯é›†ä¸­ã—ãŸãƒ“ã‚¸ãƒã‚¹æ©Ÿèƒ½ã‚’æŒã¤
- **ã‚µãƒ¼ãƒ“ã‚¹æ¯ã®ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹**: ç‹¬ç«‹ã—ãŸãƒ‡ãƒ¼ã‚¿ç®¡ç†ï¼ˆç¾åœ¨ã¯ã‚¤ãƒ³ãƒ¡ãƒ¢ãƒªï¼‰
- **åˆ†æ•£åŒ–**: ä¸­å¤®ã‚ªãƒ¼ã‚±ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¿ãƒ¼ãªã—ã€ç´”ç²‹ãªã‚¤ãƒ™ãƒ³ãƒˆé§†å‹•èª¿æ•´

### ã‚¤ãƒ™ãƒ³ãƒˆã‚½ãƒ¼ã‚·ãƒ³ã‚°

- **ã‚¤ãƒ™ãƒ³ãƒˆã‚¹ãƒˆã‚¢**: KafkaãŒã‚·ã‚¹ãƒ†ãƒ ã®ãƒ¡ãƒ¢ãƒªã¨ã—ã¦æ©Ÿèƒ½
- **ã‚¤ãƒ™ãƒ³ãƒˆå†ç”Ÿ**: ã‚¤ãƒ™ãƒ³ãƒˆã‹ã‚‰çŠ¶æ…‹ã‚’å†æ§‹ç¯‰ã™ã‚‹èƒ½åŠ›
- **ç›£æŸ»è¨¼è·¡**: ã™ã¹ã¦ã®ãƒ“ã‚¸ãƒã‚¹ã‚¤ãƒ™ãƒ³ãƒˆã®å®Œå…¨ãªå±¥æ­´

### CQRSï¼ˆã‚³ãƒãƒ³ãƒ‰ã‚¯ã‚¨ãƒªè²¬ä»»åˆ†é›¢ï¼‰

- **ã‚³ãƒãƒ³ãƒ‰**: æ›¸ãè¾¼ã¿æ“ä½œï¼ˆæ³¨æ–‡ä½œæˆã€åœ¨åº«äºˆç´„ï¼‰
- **ã‚¯ã‚¨ãƒª**: èª­ã¿è¾¼ã¿æ“ä½œï¼ˆæ³¨æ–‡ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã€åœ¨åº«ãƒ¬ãƒ™ãƒ«ï¼‰
- **åˆ†é›¢ãƒ¢ãƒ‡ãƒ«**: ç•°ãªã‚‹ã‚¢ã‚¯ã‚»ã‚¹ãƒ‘ã‚¿ãƒ¼ãƒ³ã«æœ€é©åŒ–

### ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ é€šä¿¡

- **WebSocket**: åŒæ–¹å‘ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ›´æ–°
- **Server-Sent Events**: ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹æ›´æ–°ã®ä»£æ›¿æ‰‹æ®µ
- **æ¥ç¶šç®¡ç†**: è‡ªå‹•å†æ¥ç¶šã¨ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°

## ğŸš€ ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆæ–¹æ³•

### ğŸ“¦ ã‚ªãƒ—ã‚·ãƒ§ãƒ³1: Docker Composeï¼ˆãƒ­ãƒ¼ã‚«ãƒ«/é–‹ç™ºç’°å¢ƒï¼‰

#### ã‚¹ãƒ†ãƒƒãƒ—1: ãƒªãƒã‚¸ãƒˆãƒªã®ã‚¯ãƒ­ãƒ¼ãƒ³

```bash
git clone https://github.com/your-org/kubernetes-event-driven-service.git
cd kubernetes-event-driven-service
```

#### ã‚¹ãƒ†ãƒƒãƒ—2: å…¨ã‚µãƒ¼ãƒ“ã‚¹ã®èµ·å‹•

```bash
# å…¨ã‚µãƒ¼ãƒ“ã‚¹ï¼ˆãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ + ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ï¼‰ã‚’èµ·å‹•
make run-local

# ã¾ãŸã¯ç›´æ¥Docker Composeã‚’ä½¿ç”¨
docker-compose up -d
```

#### ã‚¹ãƒ†ãƒƒãƒ—3: ã‚µãƒ¼ãƒ“ã‚¹ã®ç¢ºèª

```bash
# å…¨ã‚µãƒ¼ãƒ“ã‚¹ã®ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯
make health-check

# ãƒ­ã‚°ã®ç¢ºèª
make logs-local

# ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã‚’ãƒ–ãƒ©ã‚¦ã‚¶ã§é–‹ã
make open-frontend
```

#### ç‰¹å®šã‚µãƒ¼ãƒ“ã‚¹ã®ã¿èµ·å‹•

```bash
# ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã‚µãƒ¼ãƒ“ã‚¹ã®ã¿
docker-compose up -d zookeeper kafka order-service inventory-service payment-service notification-service shipping-service status-service

# ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã®ã¿ï¼ˆé–‹ç™ºãƒ¢ãƒ¼ãƒ‰ï¼‰
cd frontend/customer  # ã¾ãŸã¯ frontend/admin
npm install
npm run dev
```

#### ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã®å€‹åˆ¥èµ·å‹•

```bash
# é¡§å®¢ç”¨ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ (ãƒãƒ¼ãƒˆ3000)
cd frontend/customer
npm install
npm run dev

# ç®¡ç†è€…ç”¨ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ (ãƒãƒ¼ãƒˆ3001)
cd frontend/admin
npm install
npm run dev
```

#### åœæ­¢ã¨ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—

```bash
# å…¨ã‚µãƒ¼ãƒ“ã‚¹åœæ­¢
make stop-local

# ã¾ãŸã¯
docker-compose down

# ãƒœãƒªãƒ¥ãƒ¼ãƒ ã‚‚å«ã‚ã¦å®Œå…¨å‰Šé™¤
docker-compose down -v
```

### â˜¸ï¸ ã‚ªãƒ—ã‚·ãƒ§ãƒ³2: Kubernetesï¼ˆæœ¬ç•ªç’°å¢ƒï¼‰

#### Kubernetesç’°å¢ƒã®å‰ææ¡ä»¶

```bash
# kubectl ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ç¢ºèª
kubectl version --client

# ã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼ã¸ã®æ¥ç¶šç¢ºèª
kubectl cluster-info
```

#### ã‚¹ãƒ†ãƒƒãƒ—1: Kafkaï¼ˆStrimziï¼‰ã®ãƒ‡ãƒ—ãƒ­ã‚¤

```bash
# Strimzi Operatorã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
kubectl apply -f deploy/k8s/kafka/strimzi-operator.yaml

# Operatorã®èµ·å‹•ã‚’å¾…æ©Ÿ
kubectl wait deployment/strimzi-cluster-operator --for=condition=Available --timeout=300s -n kafka

# Kafkaã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼ã®ãƒ‡ãƒ—ãƒ­ã‚¤
kubectl apply -f deploy/k8s/kafka/kafka-cluster.yaml

# Kafkaã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼ã®æº–å‚™å®Œäº†ã‚’ç¢ºèª
kubectl wait kafka/my-cluster --for=condition=Ready --timeout=300s -n kafka
```

#### ã‚¹ãƒ†ãƒƒãƒ—2: ãƒã‚¤ã‚¯ãƒ­ã‚µãƒ¼ãƒ“ã‚¹ã®ãƒ‡ãƒ—ãƒ­ã‚¤

```bash
# Dockerã‚¤ãƒ¡ãƒ¼ã‚¸ã®ãƒ“ãƒ«ãƒ‰
make build-k8s

# å…¨ãƒã‚¤ã‚¯ãƒ­ã‚µãƒ¼ãƒ“ã‚¹ã®ãƒ‡ãƒ—ãƒ­ã‚¤
kubectl apply -f deploy/k8s/order-service/deployment.yaml
kubectl apply -f deploy/k8s/inventory-service/deployment.yaml
kubectl apply -f deploy/k8s/payment-service/deployment.yaml
kubectl apply -f deploy/k8s/notification-service/deployment.yaml
kubectl apply -f deploy/k8s/shipping-service/deployment.yaml
kubectl apply -f deploy/k8s/status-service/deployment.yaml

# ã¾ãŸã¯ä¸€æ‹¬ãƒ‡ãƒ—ãƒ­ã‚¤
./deploy/k8s/deploy-all.sh
```

#### Kubernetesã‚µãƒ¼ãƒ“ã‚¹ã®ç¢ºèª

```bash
# PodçŠ¶æ…‹ã®ç¢ºèª
kubectl get pods

# ã‚µãƒ¼ãƒ“ã‚¹çŠ¶æ…‹ã®ç¢ºèª
kubectl get services

# ãƒ­ã‚°ã®ç¢ºèª
kubectl logs -l app=order-service

# ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒ¯ãƒ¼ãƒ‰ã§ãƒ­ãƒ¼ã‚«ãƒ«ã‚¢ã‚¯ã‚»ã‚¹
kubectl port-forward service/status-service 8085:8085
```

#### ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°

```bash
# ãƒ¬ãƒ—ãƒªã‚«æ•°ã®å¢—åŠ 
kubectl scale deployment order-service --replicas=3
kubectl scale deployment inventory-service --replicas=2

# ã‚ªãƒ¼ãƒˆã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°ã®è¨­å®š
kubectl autoscale deployment order-service --cpu-percent=70 --min=2 --max=10
```

#### ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆ

```bash
# ãƒ­ãƒ¼ãƒªãƒ³ã‚°ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆ
kubectl set image deployment/order-service order-service=your-registry/order-service:v2.0

# ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆçŠ¶æ³ã®ç¢ºèª
kubectl rollout status deployment/order-service

# ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯ï¼ˆå¿…è¦ã«å¿œã˜ã¦ï¼‰
kubectl rollout undo deployment/order-service
```

### â˜ï¸ ã‚ªãƒ—ã‚·ãƒ§ãƒ³3: AWS EKSï¼ˆã‚¯ãƒ©ã‚¦ãƒ‰æœ¬ç•ªç’°å¢ƒï¼‰

#### AWS EKSã®å‰ææ¡ä»¶

```bash
# AWS CLI ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã¨è¨­å®š
aws configure

# eksctl ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
curl --silent --location "https://github.com/weaveworks/eksctl/releases/latest/download/eksctl_$(uname -s)_amd64.tar.gz" | tar xz -C /tmp
sudo mv /tmp/eksctl /usr/local/bin
```

#### ã‚¹ãƒ†ãƒƒãƒ—1: EKSã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼ã®ä½œæˆ

```bash
# ã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®ä½œæˆ
cat > cluster-config.yaml << EOF
apiVersion: eksctl.io/v1alpha5
kind: ClusterConfig

metadata:
  name: ecommerce-cluster
  region: us-west-2

nodeGroups:
  - name: worker-nodes
    instanceType: t3.medium
    desiredCapacity: 3
    minSize: 1
    maxSize: 5
    volumeSize: 20
    ssh:
      allow: true
EOF

# ã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼ã®ä½œæˆ
eksctl create cluster -f cluster-config.yaml
```

#### ã‚¹ãƒ†ãƒƒãƒ—2: ECRãƒªãƒã‚¸ãƒˆãƒªã®ä½œæˆã¨ã‚¤ãƒ¡ãƒ¼ã‚¸ãƒ—ãƒƒã‚·ãƒ¥

```bash
# ECRãƒªãƒã‚¸ãƒˆãƒªã®ä½œæˆ
aws ecr create-repository --repository-name order-service
aws ecr create-repository --repository-name inventory-service
aws ecr create-repository --repository-name payment-service
aws ecr create-repository --repository-name notification-service
aws ecr create-repository --repository-name shipping-service
aws ecr create-repository --repository-name status-service

# ECRãƒ­ã‚°ã‚¤ãƒ³
aws ecr get-login-password --region us-west-2 | docker login --username AWS --password-stdin <account-id>.dkr.ecr.us-west-2.amazonaws.com

# ã‚¤ãƒ¡ãƒ¼ã‚¸ã®ãƒ“ãƒ«ãƒ‰ã¨ãƒ—ãƒƒã‚·ãƒ¥
./scripts/build-and-push-ecr.sh
```

#### ã‚¹ãƒ†ãƒƒãƒ—3: EKSã¸ã®ãƒ‡ãƒ—ãƒ­ã‚¤

```bash
# kubectlè¨­å®šã®æ›´æ–°
aws eks update-kubeconfig --region us-west-2 --name ecommerce-cluster

# Strimzi Operatorã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
kubectl apply -f deploy/k8s/kafka/strimzi-operator.yaml

# ã‚µãƒ¼ãƒ“ã‚¹ã®ãƒ‡ãƒ—ãƒ­ã‚¤ï¼ˆECRã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’ä½¿ç”¨ï¼‰
envsubst < deploy/k8s/order-service/deployment.yaml | kubectl apply -f -

# Load Balancerã®è¨­å®š
kubectl apply -f deploy/k8s/ingress/
```

#### ã‚¹ãƒ†ãƒƒãƒ—4: ãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°ã®è¨­å®š

```bash
# Prometheus ã¨ Grafana ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
helm repo add prometheus-community https://prometheus-community.github.io/helm-charts
helm repo update

helm install prometheus prometheus-community/kube-prometheus-stack

# ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã¸ã®ã‚¢ã‚¯ã‚»ã‚¹
kubectl port-forward service/prometheus-grafana 3000:80
```

### ğŸ› ï¸ ç’°å¢ƒå›ºæœ‰ã®è¨­å®š

#### é–‹ç™ºç’°å¢ƒ

```bash
# é–‹ç™ºç”¨ç’°å¢ƒå¤‰æ•°
export KAFKA_BROKER=localhost:9092
export LOG_LEVEL=debug
export ENABLE_CORS=true
```

#### ã‚¹ãƒ†ãƒ¼ã‚¸ãƒ³ã‚°ç’°å¢ƒ

```bash
# ã‚¹ãƒ†ãƒ¼ã‚¸ãƒ³ã‚°ç”¨ç’°å¢ƒå¤‰æ•°
export KAFKA_BROKER=kafka.staging.svc.cluster.local:9092
export LOG_LEVEL=info
export ENABLE_METRICS=true
```

#### æœ¬ç•ªç’°å¢ƒ

```bash
# æœ¬ç•ªç”¨ç’°å¢ƒå¤‰æ•°
export KAFKA_BROKER=kafka.production.svc.cluster.local:9092
export LOG_LEVEL=warn
export ENABLE_METRICS=true
export ENABLE_DISTRIBUTED_TRACING=true
```

### ğŸ” ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆå¾Œã®ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯

#### å…¨ã‚µãƒ¼ãƒ“ã‚¹ã®ãƒ˜ãƒ«ã‚¹ç¢ºèª

```bash
# å…¨ã‚µãƒ¼ãƒ“ã‚¹ã®ãƒ˜ãƒ«ã‚¹ç¢ºèª
curl http://localhost:8080/health  # Order Service
curl http://localhost:8081/health  # Inventory Service
curl http://localhost:8082/health  # Payment Service
curl http://localhost:8083/health  # Notification Service
curl http://localhost:8084/health  # Shipping Service
curl http://localhost:8085/health  # Status Service

# Kubernetesç’°å¢ƒã§ã®ç¢ºèª
kubectl get pods -l app=order-service
kubectl logs -l app=order-service --tail=50
```

#### çµ±åˆãƒ†ã‚¹ãƒˆ

```bash
# ãƒ†ã‚¹ãƒˆæ³¨æ–‡ã®ä½œæˆ
make test-order

# ã‚¨ãƒ³ãƒ‰ãƒ„ãƒ¼ã‚¨ãƒ³ãƒ‰ãƒ†ã‚¹ãƒˆ
make test-e2e

# ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆ
make test-performance
```

### ğŸš¨ ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

#### ã‚ˆãã‚ã‚‹å•é¡Œã¨è§£æ±ºæ–¹æ³•

1. **Kafkaã«æ¥ç¶šã§ããªã„**

   ```bash
   # Kafka Podã®çŠ¶æ…‹ç¢ºèª
   kubectl get pods -n kafka
   kubectl logs -n kafka my-cluster-kafka-0
   ```

2. **ã‚µãƒ¼ãƒ“ã‚¹ãŒèµ·å‹•ã—ãªã„**

   ```bash
   # PodçŠ¶æ…‹ã®è©³ç´°ç¢ºèª
   kubectl describe pod <pod-name>
   kubectl logs <pod-name> --previous
   ```

3. **ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã‹ã‚‰APIã«æ¥ç¶šã§ããªã„**

   ```bash
   # ã‚µãƒ¼ãƒ“ã‚¹è¨­å®šã®ç¢ºèª
   kubectl get services
   kubectl port-forward service/status-service 8085:8085
   ```

#### ãƒ­ã‚°åé›†

```bash
# å…¨ã‚µãƒ¼ãƒ“ã‚¹ã®ãƒ­ã‚°ã‚’åé›†
kubectl logs -l app=order-service > order-service.log
kubectl logs -l app=inventory-service > inventory-service.log
# ...ãªã©

# é›†ç´„ã•ã‚ŒãŸãƒ­ã‚°ã®ç¢ºèª
kubectl logs -f deployment/order-service
```

## ğŸŒ ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆ

ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«ã¯2ã¤ã®Next.jsãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãŒã‚ã‚Šã¾ã™ï¼š

- **é¡§å®¢ç”¨ãƒãƒ¼ã‚¿ãƒ«** (`frontend/customer`) - ãƒãƒ¼ãƒˆ3000
- **ç®¡ç†è€…ç”¨ãƒãƒ¼ã‚¿ãƒ«** (`frontend/admin`) - ãƒãƒ¼ãƒˆ3001

### ğŸ“¦ ã‚ªãƒ—ã‚·ãƒ§ãƒ³1: Vercel ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆï¼ˆæ¨å¥¨ï¼‰

#### é¡§å®¢ç”¨ãƒãƒ¼ã‚¿ãƒ«ã®Vercelãƒ‡ãƒ—ãƒ­ã‚¤

1. **ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®æº–å‚™**

   ```bash
   cd frontend/customer
   
   # ä¾å­˜é–¢ä¿‚ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
   npm install
   
   # ãƒ“ãƒ«ãƒ‰ãƒ†ã‚¹ãƒˆ
   npm run build
   ```

2. **Vercelãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ä½œæˆ**

   ```bash
   # Vercel CLIã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
   npm install -g vercel
   
   # Vercelã«ãƒ­ã‚°ã‚¤ãƒ³
   vercel login
   
   # ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®åˆæœŸåŒ–
   vercel
   ```

3. **ç’°å¢ƒå¤‰æ•°ã®è¨­å®š**

   Vercelãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã¾ãŸã¯ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ã§è¨­å®šï¼š

   ```bash
   # æœ¬ç•ªç’°å¢ƒ
   vercel env add NEXT_PUBLIC_API_BASE_URL production
   # å€¤: https://your-api-domain.com
   
   vercel env add NEXT_PUBLIC_WS_URL production
   # å€¤: wss://your-websocket-domain.com
   
   # ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ç’°å¢ƒ
   vercel env add NEXT_PUBLIC_API_BASE_URL preview
   # å€¤: https://staging-api-domain.com
   ```

4. **ã‚«ã‚¹ã‚¿ãƒ ãƒ‰ãƒ¡ã‚¤ãƒ³ã®è¨­å®šï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰**

   ```bash
   # ã‚«ã‚¹ã‚¿ãƒ ãƒ‰ãƒ¡ã‚¤ãƒ³ã®è¿½åŠ 
   vercel domains add customer.your-domain.com
   vercel alias set your-vercel-app.vercel.app customer.your-domain.com
   ```

#### ç®¡ç†è€…ç”¨ãƒãƒ¼ã‚¿ãƒ«ã®Vercelãƒ‡ãƒ—ãƒ­ã‚¤

```bash
cd frontend/admin

# åŒæ§˜ã®æ‰‹é †ã§ãƒ‡ãƒ—ãƒ­ã‚¤
vercel

# ã‚«ã‚¹ã‚¿ãƒ ãƒ‰ãƒ¡ã‚¤ãƒ³ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰
vercel domains add admin.your-domain.com
```

#### è‡ªå‹•ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆã®è¨­å®š

`vercel.json` ã‚’å„ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ä½œæˆï¼š

```json
{
  "version": 2,
  "name": "ecommerce-customer-portal",
  "builds": [
    {
      "src": "package.json",
      "use": "@vercel/next"
    }
  ],
  "routes": [
    {
      "src": "/(.*)",
      "dest": "/$1"
    }
  ],
  "env": {
    "NEXT_PUBLIC_API_BASE_URL": "@api-base-url",
    "NEXT_PUBLIC_WS_URL": "@websocket-url"
  }
}
```

#### GitHubé€£æºã«ã‚ˆã‚‹è‡ªå‹•ãƒ‡ãƒ—ãƒ­ã‚¤

1. **GitHubãƒªãƒã‚¸ãƒˆãƒªã®é€£æº**

   ```bash
   # Vercelãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã§ä»¥ä¸‹ã‚’è¨­å®šï¼š
   # 1. GitHubãƒªãƒã‚¸ãƒˆãƒªã‚’é€£æº
   # 2. Root Directory ã‚’ "frontend/customer" ã«è¨­å®š
   # 3. Build Command ã‚’ "npm run build" ã«è¨­å®š
   # 4. Output Directory ã‚’ ".next" ã«è¨­å®š
   ```

2. **ãƒ—ãƒ«ãƒªã‚¯ã‚¨ã‚¹ãƒˆç”¨ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼**

   - mainãƒ–ãƒ©ãƒ³ãƒ â†’ æœ¬ç•ªãƒ‡ãƒ—ãƒ­ã‚¤
   - feature/* ãƒ–ãƒ©ãƒ³ãƒ â†’ ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ãƒ‡ãƒ—ãƒ­ã‚¤

### ğŸ“¦ ã‚ªãƒ—ã‚·ãƒ§ãƒ³2: Docker + Cloud Run ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆ

#### Dockerã‚¤ãƒ¡ãƒ¼ã‚¸ã®ãƒ“ãƒ«ãƒ‰ã¨ãƒ‡ãƒ—ãƒ­ã‚¤

```bash
# é¡§å®¢ç”¨ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã®ãƒ“ãƒ«ãƒ‰
cd frontend/customer
docker build -t gcr.io/your-project/customer-frontend:latest .

# Google Cloud Runã¸ã®ãƒ‡ãƒ—ãƒ­ã‚¤
gcloud run deploy customer-frontend \
  --image gcr.io/your-project/customer-frontend:latest \
  --platform managed \
  --region us-central1 \
  --allow-unauthenticated \
  --set-env-vars="NEXT_PUBLIC_API_BASE_URL=https://your-api-domain.com"

# ç®¡ç†è€…ç”¨ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã®ãƒ“ãƒ«ãƒ‰
cd ../admin
docker build -t gcr.io/your-project/admin-frontend:latest .

# Google Cloud Runã¸ã®ãƒ‡ãƒ—ãƒ­ã‚¤
gcloud run deploy admin-frontend \
  --image gcr.io/your-project/admin-frontend:latest \
  --platform managed \
  --region us-central1 \
  --allow-unauthenticated \
  --set-env-vars="NEXT_PUBLIC_API_BASE_URL=https://your-api-domain.com"
```

### ğŸ“¦ ã‚ªãƒ—ã‚·ãƒ§ãƒ³3: Kubernetesãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆ

#### ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ç”¨K8sãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆ

`deploy/k8s/frontend/customer-frontend.yaml`:

```yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: customer-frontend
spec:
  replicas: 2
  selector:
    matchLabels:
      app: customer-frontend
  template:
    metadata:
      labels:
        app: customer-frontend
    spec:
      containers:
      - name: customer-frontend
        image: your-registry/customer-frontend:latest
        ports:
        - containerPort: 3000
        env:
        - name: NEXT_PUBLIC_API_BASE_URL
          value: "http://status-service:8085"
        - name: NEXT_PUBLIC_WS_URL
          value: "ws://status-service:8085"
---
apiVersion: v1
kind: Service
metadata:
  name: customer-frontend
spec:
  selector:
    app: customer-frontend
  ports:
  - port: 80
    targetPort: 3000
  type: LoadBalancer
```

#### ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã®K8sãƒ‡ãƒ—ãƒ­ã‚¤

```bash
# ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã‚¤ãƒ¡ãƒ¼ã‚¸ã®ãƒ“ãƒ«ãƒ‰
docker build -t your-registry/customer-frontend:latest frontend/customer/
docker build -t your-registry/admin-frontend:latest frontend/admin/

# ã‚¤ãƒ¡ãƒ¼ã‚¸ã®ãƒ—ãƒƒã‚·ãƒ¥
docker push your-registry/customer-frontend:latest
docker push your-registry/admin-frontend:latest

# Kubernetesã¸ã®ãƒ‡ãƒ—ãƒ­ã‚¤
kubectl apply -f deploy/k8s/frontend/
```

### ğŸŒ CDN ã¨ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–

#### Vercel ã§ã®æœ€é©åŒ–

1. **ç”»åƒæœ€é©åŒ–**

   ```jsx
   import Image from 'next/image'
   
   // è‡ªå‹•çš„ã«WebPå½¢å¼ã«å¤‰æ›ã€é…å»¶èª­ã¿è¾¼ã¿
   <Image
     src="/product-image.jpg"
     alt="Product"
     width={400}
     height={300}
   />
   ```

2. **Static Generation**

   ```jsx
   // pages/products/[id].js
   export async function getStaticProps({ params }) {
     return {
       props: {
         product: await fetchProduct(params.id)
       },
       revalidate: 3600 // 1æ™‚é–“ã§ãƒªãƒãƒªãƒ‡ãƒ¼ãƒˆ
     }
   }
   ```

#### CloudFlare é€£æº

```bash
# CloudFlare DNSè¨­å®š
# A Record: customer.your-domain.com â†’ Vercel IP
# CNAME: admin.your-domain.com â†’ admin-app.vercel.app
```

### ğŸ”§ ç’°å¢ƒå¤‰æ•°ç®¡ç†

#### é–‹ç™ºç’°å¢ƒ (`.env.local`)

```bash
# é¡§å®¢ç”¨ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰
NEXT_PUBLIC_API_BASE_URL=http://localhost:8085
NEXT_PUBLIC_WS_URL=ws://localhost:8085
NEXT_PUBLIC_ENVIRONMENT=development

# ç®¡ç†è€…ç”¨ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰  
NEXT_PUBLIC_API_BASE_URL=http://localhost:8085
NEXT_PUBLIC_WS_URL=ws://localhost:8085
NEXT_PUBLIC_ENVIRONMENT=development
```

#### ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰æœ¬ç•ªç’°å¢ƒ

```bash
# Vercelç’°å¢ƒå¤‰æ•°
NEXT_PUBLIC_API_BASE_URL=https://api.your-domain.com
NEXT_PUBLIC_WS_URL=wss://api.your-domain.com
NEXT_PUBLIC_ENVIRONMENT=production
NEXT_PUBLIC_GA_ID=G-XXXXXXXXXX
```

### ğŸ“Š ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆç›£è¦–

#### Vercel Analytics

```jsx
// pages/_app.js
import { Analytics } from '@vercel/analytics/react'

export default function App({ Component, pageProps }) {
  return (
    <>
      <Component {...pageProps} />
      <Analytics />
    </>
  )
}
```

#### Lighthouse CI

```yaml
# .github/workflows/lighthouse.yml
name: Lighthouse CI
on: [push]
jobs:
  lhci:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - name: Run Lighthouse CI
        run: |
          npm install -g @lhci/cli@0.12.x
          lhci autorun
```

### ğŸš€ ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰CI/CDãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³

#### GitHub Actionsè¨­å®š

`.github/workflows/frontend-deploy.yml`:

```yaml
name: Frontend Deployment

on:
  push:
    branches: [main]
    paths: ['frontend/**']
  pull_request:
    branches: [main]
    paths: ['frontend/**']

jobs:
  deploy-customer:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      
      - name: Setup Node.js
        uses: actions/setup-node@v3
        with:
          node-version: '18'
          cache: 'npm'
          cache-dependency-path: frontend/customer/package-lock.json
      
      - name: Install dependencies
        run: |
          cd frontend/customer
          npm ci
      
      - name: Run tests
        run: |
          cd frontend/customer
          npm run test
      
      - name: Build application
        run: |
          cd frontend/customer
          npm run build
      
      - name: Deploy to Vercel
        uses: amondnet/vercel-action@v25
        with:
          vercel-token: ${{ secrets.VERCEL_TOKEN }}
          vercel-org-id: ${{ secrets.ORG_ID }}
          vercel-project-id: ${{ secrets.PROJECT_ID }}
          working-directory: frontend/customer
```

### ğŸ“± ãƒ¢ãƒã‚¤ãƒ«å¯¾å¿œ

#### PWAè¨­å®š

```javascript
// next.config.js
const withPWA = require('next-pwa')({
  dest: 'public'
})

module.exports = withPWA({
  // Next.jsè¨­å®š
})
```

#### ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ãƒ‡ã‚¶ã‚¤ãƒ³

```jsx
// Tailwind CSSã§ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–å¯¾å¿œ
<div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
  {products.map(product => (
    <ProductCard key={product.id} product={product} />
  ))}
</div>
```

## ğŸ”§ è¨­å®š

### ç’°å¢ƒå¤‰æ•°

```bash
# Kafkaè¨­å®š
KAFKA_BROKER=localhost:9092

# ã‚µãƒ¼ãƒ“ã‚¹ãƒãƒ¼ãƒˆï¼ˆDocker Composeã§è‡ªå‹•è¨­å®šï¼‰
ORDER_SERVICE_PORT=8080
INVENTORY_SERVICE_PORT=8081
PAYMENT_SERVICE_PORT=8082
NOTIFICATION_SERVICE_PORT=8083
SHIPPING_SERVICE_PORT=8084
STATUS_SERVICE_PORT=8085
FRONTEND_PORT=3000
```

### å•†å“ã‚«ã‚¿ãƒ­ã‚°ï¼ˆè¨­å®šå¯èƒ½ï¼‰

```go
// ç¾åœ¨ã®å•†å“è¨­å®š
products := map[string]ProductInfo{
    "product-1": {Name: "ãƒ—ãƒ¬ãƒŸã‚¢ãƒ ã‚¦ã‚£ã‚¸ã‚§ãƒƒãƒˆ", Price: 29.99, InitialStock: 100},
    "product-2": {Name: "ãƒ‡ãƒ©ãƒƒã‚¯ã‚¹ã‚¬ã‚¸ã‚§ãƒƒãƒˆ", Price: 49.99, InitialStock: 50},
    "product-3": {Name: "ã‚¨ãƒªãƒ¼ãƒˆãƒ‡ãƒã‚¤ã‚¹", Price: 99.99, InitialStock: 25},
}
```

## ğŸ“ˆ ãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚° & å¯è¦³æ¸¬æ€§

### ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯

å…¨ã‚µãƒ¼ãƒ“ã‚¹ãŒ `/health` ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã‚’æä¾›ï¼š

```bash
# å…¨ã‚µãƒ¼ãƒ“ã‚¹ã®ãƒ˜ãƒ«ã‚¹ç¢ºèª
make health-check

# å€‹åˆ¥ã‚µãƒ¼ãƒ“ã‚¹ã®ãƒ˜ãƒ«ã‚¹ç¢ºèª
curl http://localhost:8080/health
curl http://localhost:8081/health
# ... ãªã©
```

### ãƒ¡ãƒˆãƒªã‚¯ã‚¹ï¼ˆå°†æ¥å®Ÿè£…äºˆå®šï¼‰

- Prometheusãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ
- Grafanaãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰
- Jaegeråˆ†æ•£ãƒˆãƒ¬ãƒ¼ã‚·ãƒ³ã‚°
- ELKã‚¹ã‚¿ãƒƒã‚¯ã«ã‚ˆã‚‹é›†ä¸­ãƒ­ã‚°

### ç¾åœ¨ã®ãƒ­ã‚°æ©Ÿèƒ½

- æ§‹é€ åŒ–JSONãƒ­ã‚°
- ãƒªã‚¯ã‚¨ã‚¹ãƒˆ/ãƒ¬ã‚¹ãƒãƒ³ã‚¹ãƒ­ã‚°
- ã‚¨ãƒ©ãƒ¼è¿½è·¡
- ã‚¤ãƒ™ãƒ³ãƒˆå‡¦ç†ãƒ­ã‚°

## ğŸ§ª ãƒ†ã‚¹ãƒˆ

### ãƒ†ã‚¹ãƒˆãƒ”ãƒ©ãƒŸãƒƒãƒ‰

```bash
# ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆ
make test-unit

# çµ±åˆãƒ†ã‚¹ãƒˆ
make test-integration

# ã‚¨ãƒ³ãƒ‰ãƒ„ãƒ¼ã‚¨ãƒ³ãƒ‰ãƒ†ã‚¹ãƒˆ
make test-e2e

# ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆ
make test-performance
```

### ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸

- **ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆ**: ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ã¨ã‚¤ãƒ™ãƒ³ãƒˆãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
- **çµ±åˆãƒ†ã‚¹ãƒˆ**: ã‚µãƒ¼ãƒ“ã‚¹é–“é€šä¿¡
- **ã‚¨ãƒ³ãƒ‰ãƒ„ãƒ¼ã‚¨ãƒ³ãƒ‰ãƒ†ã‚¹ãƒˆ**: å®Œå…¨ãªãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼
- **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆ**: è² è·ãƒ»ã‚¹ãƒˆãƒ¬ã‚¹ãƒ†ã‚¹ãƒˆ

## ğŸ“š ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

- ğŸ“‹ **[ARCHITECTURE.md](ARCHITECTURE.md)** - å®Œå…¨ãªã‚·ã‚¹ãƒ†ãƒ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£
- ğŸ”§ **[TECHNICAL_SPECIFICATION.md](TECHNICAL_SPECIFICATION.md)** - è©³ç´°æŠ€è¡“ä»•æ§˜
- ğŸ¯ **[CLAUDE.md](CLAUDE.md)** - å…ƒã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆè¦ä»¶
- ğŸ“– **API Documentation** - OpenAPI/Swaggerä»•æ§˜ï¼ˆå„ã‚µãƒ¼ãƒ“ã‚¹å†…ï¼‰

## ğŸ¤ ã‚³ãƒ³ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³

### é–‹ç™ºãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼

1. **ãƒªãƒã‚¸ãƒˆãƒªã‚’ãƒ•ã‚©ãƒ¼ã‚¯**
2. **æ©Ÿèƒ½ãƒ–ãƒ©ãƒ³ãƒä½œæˆ**: `git checkout -b feature/amazing-feature`
3. **ãƒ†ã‚¹ãƒˆä»˜ãã§å¤‰æ›´**
4. **å“è³ªãƒã‚§ãƒƒã‚¯å®Ÿè¡Œ**: `make lint test`
5. **å¾“æ¥å‹ã‚³ãƒŸãƒƒãƒˆ**: `feat: add amazing feature`
6. **ãƒ—ãƒƒã‚·ãƒ¥ã—ã¦ãƒ—ãƒ«ãƒªã‚¯ã‚¨ã‚¹ãƒˆä½œæˆ**

### ã‚³ãƒ¼ãƒ‰æ¨™æº–

- **Go**: Effective Goã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³æº–æ‹ ã€`gofmt` ä½¿ç”¨
- **TypeScript**: ESLint + Prettierè¨­å®š
- **ã‚³ãƒŸãƒƒãƒˆ**: Conventional Commitsãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ
- **ãƒ†ã‚¹ãƒˆ**: 80%ä»¥ä¸Šã®ã‚«ãƒãƒ¬ãƒƒã‚¸ç¶­æŒ

## ğŸ“‹ Makefileã‚³ãƒãƒ³ãƒ‰

```bash
# é–‹ç™º
make build-local          # å…¨Dockerã‚¤ãƒ¡ãƒ¼ã‚¸ãƒ“ãƒ«ãƒ‰
make run-local            # å…¨ã‚µãƒ¼ãƒ“ã‚¹èµ·å‹•
make stop-local           # å…¨ã‚µãƒ¼ãƒ“ã‚¹åœæ­¢
make logs-local           # ã‚µãƒ¼ãƒ“ã‚¹ãƒ­ã‚°è¡¨ç¤º

# ãƒ†ã‚¹ãƒˆ
make test-order           # ãƒ†ã‚¹ãƒˆæ³¨æ–‡ä½œæˆ
make test-inventory       # åœ¨åº«ç¢ºèª
make test-status          # æ³¨æ–‡ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ç¢ºèª

# Kubernetes
make build-k8s            # Kubernetesç”¨ãƒ“ãƒ«ãƒ‰
make deploy-k8s           # Kubernetesã¸ãƒ‡ãƒ—ãƒ­ã‚¤
make clean-k8s            # Kubernetesãƒªã‚½ãƒ¼ã‚¹ã‚¯ãƒªãƒ¼ãƒ³

# ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£
make open-frontend        # ãƒ–ãƒ©ã‚¦ã‚¶ã§ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰é–‹ã
make port-forward         # K8sãƒãƒ¼ãƒˆãƒ•ã‚©ãƒ¯ãƒ¼ãƒ‰è¨­å®š
make health-check         # å…¨ã‚µãƒ¼ãƒ“ã‚¹ãƒ˜ãƒ«ã‚¹ç¢ºèª
```

## ğŸ”® ãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ—

### ãƒ•ã‚§ãƒ¼ã‚º2 - æ©Ÿèƒ½å¼·åŒ–

- [ ] ãƒ¦ãƒ¼ã‚¶ãƒ¼èªè¨¼ï¼ˆJWT/OAuth2ï¼‰
- [ ] æ³¨æ–‡ã‚­ãƒ£ãƒ³ã‚»ãƒ«ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼
- [ ] åœ¨åº«è£œå……ã‚¤ãƒ™ãƒ³ãƒˆ
- [ ] æ±ºæ¸ˆè¿”é‡‘å‡¦ç†
- [ ] å¤šé€šè²¨å¯¾å¿œ

### ãƒ•ã‚§ãƒ¼ã‚º3 - é«˜åº¦ãªæ©Ÿèƒ½

- [ ] ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ°¸ç¶šåŒ–ï¼ˆPostgreSQLï¼‰
- [ ] ã‚­ãƒ£ãƒƒã‚·ãƒ¥å±¤ï¼ˆRedisï¼‰
- [ ] ã‚µãƒ¼ãƒ“ã‚¹ãƒ¡ãƒƒã‚·ãƒ¥ï¼ˆIstioï¼‰
- [ ] é«˜åº¦ãªãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°ï¼ˆPrometheus/Grafanaï¼‰
- [ ] éœ€è¦äºˆæ¸¬æ©Ÿæ¢°å­¦ç¿’

### ãƒ•ã‚§ãƒ¼ã‚º4 - ã‚¨ãƒ³ã‚¿ãƒ¼ãƒ—ãƒ©ã‚¤ã‚ºæ©Ÿèƒ½

- [ ] ãƒãƒ«ãƒãƒ†ãƒŠãƒ³ãƒˆã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£
- [ ] A/Bãƒ†ã‚¹ãƒˆãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯
- [ ] é«˜åº¦ãªåˆ†æ
- [ ] ãƒ¢ãƒã‚¤ãƒ«ã‚¢ãƒ—ãƒªï¼ˆReact Nativeï¼‰
- [ ] ãƒãƒ«ãƒãƒªãƒ¼ã‚¸ãƒ§ãƒ³ãƒ‡ãƒ—ãƒ­ã‚¤

## ğŸ“„ ãƒ©ã‚¤ã‚»ãƒ³ã‚¹

ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯MITãƒ©ã‚¤ã‚»ãƒ³ã‚¹ã®ä¸‹ã§ãƒ©ã‚¤ã‚»ãƒ³ã‚¹ã•ã‚Œã¦ã„ã¾ã™ - è©³ç´°ã¯[LICENSE](LICENSE)ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

## ğŸ†˜ ã‚µãƒãƒ¼ãƒˆ

- ğŸ“§ **èª²é¡Œ**: [GitHub Issues](https://github.com/your-org/event-driven-ecommerce/issues)
- ğŸ’¬ **ãƒ‡ã‚£ã‚¹ã‚«ãƒƒã‚·ãƒ§ãƒ³**: [GitHub Discussions](https://github.com/your-org/event-driven-ecommerce/discussions)
- ğŸ“– **ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ**: [ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆWiki](https://github.com/your-org/event-driven-ecommerce/wiki)

## â­ è¬è¾

- **Apache Kafka** - ã‚¤ãƒ™ãƒ³ãƒˆã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ 
- **Strimzi** - Kubernetes Kafkaã‚ªãƒšãƒ¬ãƒ¼ã‚¿ãƒ¼
- **Gin Framework** - Go HTTP Webãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯
- **Next.js** - æœ¬ç•ªå¯¾å¿œReactãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯
- **Tailwind CSS** - ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ãƒ•ã‚¡ãƒ¼ã‚¹ãƒˆCSSãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯

---

ğŸ‰ **ãƒãƒƒãƒ”ãƒ¼ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ï¼** ğŸ‰

ãƒ¢ãƒ€ãƒ³ãªã‚¤ãƒ™ãƒ³ãƒˆé§†å‹•ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ãƒ‘ã‚¿ãƒ¼ãƒ³ã§â¤ï¸ã‚’è¾¼ã‚ã¦ä½œæˆ

[â¬† ãƒˆãƒƒãƒ—ã«æˆ»ã‚‹](#-ã‚¤ãƒ™ãƒ³ãƒˆé§†å‹•å‹ecãƒã‚¤ã‚¯ãƒ­ã‚µãƒ¼ãƒ“ã‚¹)